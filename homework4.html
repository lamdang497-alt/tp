<!--
Program name: homework4.html
Name: Lam Dang
Date Created: 04/28/2025
Date Last Edited: 04/28/2025
Version: 1.0
Description: This is a form that will collect the users information and use it to create a profile
-->
<!DOCTYPE html>
<html lang="en">


<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="homework4.css" rel="stylesheet">
    <title>Homework 4 - HTML Form</title>
</head>

<body>
        <tr>
                <!-- logo -->
                <td>
                <img id="logo" src="../../healthaid.jpg" alt= "company logo" />         
                </td>
                <td valign="bottom" align="right">
                <h1>Health Aid Medical</h1>
                <!-- Today's Date -->
                <center>
                <p>Today is: <span id="currentDate"></span></p>
                    <p id="date"></p>
                        <!-- JavaScript for displaying dynamic date -->
                            <script>
                                const dateElement = document.getElementById('date');
                                const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
                                const today = new Date().toLocaleDateString('en-US', options);
                                dateElement.textContent = today;
                            </script>
                        </td>
                        </tr>
                        <hr>
        
        <header>
            <h2 id="welcomeMessage">Welcome New User!</h2>
            <a href="#" id="resetLink" style="display: none;"></a>
        </header>

        <main>
            <table>              
                <form id="userForm" action="homework4-thankyou.html">
                    <div class="format">
                    <tr class="form">
                    <th class="form" colspan="3">Patient Form</th>
                    </tr>
                        <!-- Username -->
                            <tr>
                                <td class="table"><label for="userID">Username:</label></td>
                                <td><input
                                type="text" id="userID" name="userID" size="15" minlength="5" maxlength="20" placeholder="Enter Username"  
                                oninvalid="this.setCustomValidity('Please enter a username (letters, numbers, underscore, or dash)')"oninput="this.setCustomValidity('')"
                                oninput="this.setCustomValidity('')"; formatUserID()""
                                onblur="validateUserID()"
                                pattern="^[a-zA-Z_-][a-zA-Z0-9_-]{4,29}$"
                                required>
                                <span class="error-message" id="userIDError"></span>
                                </td>
                            </tr>
                        <!-- Password -->
                            <tr>
                                <td class="table"><label for="password">Password:</label></td>
                                <td><input
                                type="password" id="password" name="password" size="15"
                                placeholder="Enter Password"
                                title="Password must be 8-30 characters long, include at least one uppercase letter, one lowercase letter, one number, and one special character (!@#%^&*()-_+=\/><.,`~)."
                                oninvalid="this.setCustomValidity('Please enter a password that meets the required criteria.')"
                                oninput="this.setCustomValidity('')"
                                onblur="validatePassword()"
                                required>
                                <span class="error-message" id="passwordError"></span>
                                </td>
                            </tr>
                        <!-- Re-enter Password -->
                            <tr>
                                <td class="table"><label for="re_password">Re-enter Password: </label></td>
                                <td>
                                <input
                                type="password" id="re_password" name="re_password" size="15"
                                placeholder="Re-enter Password"
                                title="Passwords must match"
                                oninvalid="this.setCustomValidity('Please re-enter password to match the first password')"
                                oninput="this.setCustomValidity('')"
                                onblur="validatePasswordMatch()" 
                                required>
                                <span class="error-message" id="passwordMatchError"></span>
                                </td>
                            </tr>
                           
                            <tr>
                                <td colspan="2"><hr></td>
                            </tr>


                        <!-- First Name -->
                            <tr>
                                <td class="table"><label for="firstName">First Name:</label></td>
                                <td><input
                                type="text" id="firstName" name="firstName" size="15" maxlength="30"
                                placeholder="Enter First Name"
                                oninvalid="this.setCustomValidity('First Name not valid.')"
                                oninput="this.setCustomValidity('')"
                                pattern="[A-Z^a-z-' ^~]{2,}"
                                onblur="validateFirstName()"
                                title="First name must contain 1 to 30 characters, letters, apostrophes, and dashes only."
                                required>
                                <span class="error-message" id="firstNameError"></span>
                                </td>
                            </tr>
                        <!-- Middle Initial -->
                            <tr>
                                <td class="table"><label for="middleInitial">Middle Initial:</label></td>
                                <td><input
                                type="text" id="middleInitial" name="middleInitial" size="1"
                                maxlength="1"
                                placeholder="M."
                                pattern="[A-Z^a-z ]"
                                title= "Please enter a single uppercase letter."
                                onblur= "validateMiddleInitial ()"
                                oninvalid="this.setCustomValidity('Invalid Middle Initial')"
                                oninput="this.setCustomValidity('')">
                                <span class ="error-message" id="middleInitialError"></span>
                                </td>
                            </tr>
                        <!-- Last Name -->
                            <tr>
                                <td class="table"><label for="lastName">Last Name:</label></td>
                                <td><input
                                type="text"
                                id="lastName"
                                name="lastName"
                                maxlength="30"
                                size="15"  
                                pattern="[A-Z^a-z \-'^~]{2,5}"
                                title: "Please enter a valid Last Name"
                                placeholder="Enter Last Name"
                                oninvalid="this.setCustomValidity('Last Name is Required')"
                                oninput="this.setCustomValidity('')"
                                onblur="validateLastName()"
                                required>
                                <span class="error-message" id="lastNameError"></span>
                                </td>
                            </tr>
                        <!-- Date of Birth -->
                            <tr>
                                <td class="table"><label for="dateOfBirth">Date of Birth:</label></td>
                                <td><input
                                type="date"
                                id="dateOfBirth"
                                name="dateOfBirth"
                                pattern="\d{2}/\d{2}/\d{4}"
                                placeholder="MM/DD/YYYY"
                                title="Please enter a valid Date of Birth"
                                onblur="dobValidation()"
                                required>
                                <span class="error-message" id="dob-error"></span>
                                </td>
                            </tr>
                        <!-- Social Security -->
                            <tr>
                                <td class="table"><label for="ssn">SSN:</label></td>
                                <td><input
                                type="password"
                                id="ssn"
                                name="ssn"
                                minlength="9"
                                maxlength="11"
                                placeholder="XXX-XX-XXXX"
                                title="Enter SSN in XXX-XX-XXXX format"
                                oninput="formatSSN()"
                                onblur="validateSSN()"
                                required>
                                <span class="error-message" id="ssnError"></span>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="2"><hr></td>
                            </tr>
                        <!-- Address -->
                            <tr>
                                <td class="table"><label for="address1">Address 1:</label></td>
                                <td><input
                                type="text"
                                id="address1"
                                name="address1"
                                placeholder="Apt., suite, etc."
                                minlength="2"
                                maxlength="30"
                                title="Please enter your address, 2 to 30 characters."
                                oninvalid="this.setCustomValidity('Address is Required')"
                                oninput="this.setCustomValidity('')"
                                onblur= "validateAddress()"
                                required>
                                <span class="error-message" id="addressError"></span>
                                </td>
                            </tr>
                        <!-- Address 2 (optional) -->
                        <tr>
                            <td class="table"><label for="address2">Address 2:</label></td>
                            <td>
                                <input 
                                type="text" 
                                id="address2" 
                                name="address2" 
                                placeholder="Apt., suite, etc. (optional)" 
                                minlength="2" 
                                maxlength="30"
                                title="Please enter address, 2 to 30 characters if provided."
                                oninput="this.setCustomValidity('')" 
                                onblur="validateAddress2()" >
                                <span class="error-message" id="address2Error"></span>
                            </td>
                        </tr>
                        <tr class="address-group">

                        <!-- City -->
                            <td class="table"><label for="city">City:</label></td>
                            <td><input
                                type="text"
                                id="city"
                                name="city"
                                placeholder="Enter City"
                                size="10"
                                minlength="2"
                                maxlength="30"
                                oninvalid="this.setCustomValidity('Please Provide Your City')"
                                oninput="this.setCustomValidity('')"
                                onblur="validateCity()" 
                                required>
                                <span class="error-message" id="cityError"></span>
                            </td>
                        <!-- State -->
                            <td class="table"><label for="state">State:</label></td>
                            <td>
                            <select id="state" name="state" required>
                                <option value="">Unselected</option>
                                <option value="AL">Alabama</option>
                                <option value="AK">Alaska</option>
                                <option value="AZ">Arizona</option>
                                <option value="AR">Arkansas</option>
                                <option value="CA">California</option>
                                <option value="CO">Colorado</option>
                                <option value="CT">Connecticut</option>
                                <option value="DE">Delaware</option>
                                <option value="DC">District Of Columbia</option>
                                <option value="FL">Florida</option>
                                <option value="GA">Georgia</option>
                                <option value="HI">Hawaii</option>
                                <option value="ID">Idaho</option>
                                <option value="IL">Illinois</option>
                                <option value="IN">Indiana</option>
                                <option value="IA">Iowa</option>
                                <option value="KS">Kansas</option>
                                <option value="KY">Kentucky</option>
                                <option value="LA">Louisiana</option>
                                <option value="ME">Maine</option>
                                <option value="MD">Maryland</option>
                                <option value="MA">Massachusetts</option>
                                <option value="MI">Michigan</option>
                                <option value="MN">Minnesota</option>
                                <option value="MS">Mississippi</option>
                                <option value="NH">New Hampshire</option>
                                <option value="NJ">New Jersey</option>
                                <option value="NM">New Mexico</option>
                                <option value="NY">New York</option>
                                <option value="NC">North Carolina</option>
                                <option value="ND">North Dakota</option>
                                <option value="OH">Ohio</option>
                                <option value="OK">Oklahoma</option>
                                <option value="OR">Oregon</option>
                                <option value="PA">Pennsylvania</option>
                                <option value="PR">Puerto Rico</option>
                                <option value="RI">Rhode Island</option>
                                <option value="SC">South Carolina</option>
                                <option value="SD">South Dakota</option>
                                <option value="TN">Tennessee</option>
                                <option value="TX">Texas</option>
                                <option value="UT">Utah</option>
                                <option value="VT">Vermont</option>
                                <option value="VA">Virginia</option>
                                <option value="WA">Washington</option>
                                <option value="WV">West Virginia</option>
                                <option value="WI">Wisconsin</option>
                                <option value="WY">Wyoming</option>
                            </select>
                            </td>


                        <!-- Zip Code -->
                            <td class="table"><label for="zipCode">Zip Code:</label></td>
                            <td><input
                                type="text"
                                id="zipCode"
                                name="zipCode"
                                placeholder="Enter ZIP"
                                pattern="[0-9]{5}"
                                size="6"
                                minlength="5"
                                maxlength="9"
                                title="Please enter Zip-Code"
                                oninvalid="this.setCustomValidity('5 Digit Zip/Postal Code required')"
                                oninput="this.setCustomValidity('')"
                                onblur= "validateZipCode()"
                                required>
                                <span class="error-message" id="zipCodeError"></span>
                            </td>
                            </tr>

                            <tr>
                            <td colspan="2"><hr></td>
                            </tr>

                            <!-- Email Address -->
                        <tr>
                            <td class="table"><label for="email">Email:</label></td>
                            <td>
                                <input 
                                    type="email" 
                                    id="email" 
                                    name="email" 
                                    placeholder="name@domain.tld" 
                                    maxlength="40"
                                    title="Please enter a valid email address"
                                    oninvalid="this.setCustomValidity('Email not valid.')"
                                    oninput="this.setCustomValidity('')" 
                                    onblur="validateEmail()"
                                    required>
                                <span class="error-message" id="emailError"></span>
                            </td>
                        </tr>

                        <!-- Phone Number -->
                        <tr>
                            <td class="table"><label for="phone">Phone #:</label></td>
                            <td>
                                <input 
                                    type="text" 
                                    id="phoneNumber" 
                                    name="phoneNumber" 
                                    placeholder="XXX-XXX-XXXX"
                                    title="Please enter a valid phone number (XXX-XXX-XXXX)"
                                    maxlength="14" 
                                    oninput="formatPhoneNumber()"
                                    onblur="validatePhoneNumber()"
                                    pattern="^\d{3}-\d{3}-\d{4}$"
                                    required>
                                <span class="error-message" id="phoneError"></span>
                            </td>
                        </tr>

                        <tr>
                            <td colspan="2"><hr></td>
                        </tr>

                        <!-- Radio Buttons -->
                        <!-- Gender -->
                            </tr>
                                <td class="table"><label id="gender">Gender:</label>
                                <td>
                                <input type="radio" name="msex" value="Male">
                                <span>Male</span>
                                <input type="radio" name="msex" value="Female">
                                <span>Female</span>
                                <input type="radio" name="msex" value="Other">
                                <span>Other</span>
                            </tr>
                        <!-- Marital Status -->
                            </tr>
                                <td class="table"><label id="marital">What is your marital status?</label>
                                <td><input type="radio" name="marital_status" value="Single">
                                <span>Single</span>
                                <input type="radio" name="marital_status" value="Married">
                                <span>Married</span>
                                <input type="radio" name="marital_status" value="Divorced">
                                <span>Divorced</span>
                            </tr>
                        <!-- Insurance -->
                            </tr>
                                <td class="table"><label id="insurance">Do you have insurance?</label>
                                <td><input type="radio" name="insurance" value="Yes">
                                <span>Yes</span>
                                <input type="radio" name="insurance" value="No">
                                <span>No</span>
                                <input type="radio" name="insurance" value="Unsure">
                                <span>Unsure</span>
                            </tr>
                        <!-- Enter Reason for Visitation -->
                         <tr>
                                <td class="table"><label for="description"> What is your reasoning for visiting us today? </label></td>
                                <td><textarea
                                    id="description"
                                    name="description"
                                    rows="6"
                                    cols="50"
                                    pattern="^[^\"\\]*$"
                                    title="Please avoid using double quotes"></textarea></td>
                        </tr>
                        <!-- Checkboxes -->
                            <tr>
                                <td class="check" colspan="2">
                                    <fieldset>
                                        <legend>Do you have or have had any of the following?:</legend>
                                        <label><input type="checkbox" id="HeartDisease" name=medicalConditions> Heart Disease</label>
                                        <label><input type="checkbox" id="Measles" name=medicalConditions> Measles</label>
                                        <label><input type="checkbox" id="Meningitis" name=medicalConditions> Meningitis </label>
                                        <label><input type="checkbox" id="Hepatitis" name=medicalConditions> Hepatitis</label>
                                        <label><input type="checkbox" id="Cancer" name=medicalConditions> Cancer</label>
                                        <label><input type="checkbox" id="other" name=medicalConditions> Other <input type="text" maxlength="30"></label>
                                       
                                    </fieldset>
                                </td>
                            </tr>
                        <!-- Pain Scale Slider -->
                                    </fieldset>
                                </td>
                            </tr>
               
                            <tr>
                                <td class="slider" colspan="2">
                                    <fieldset>
                                        <legend>What is your pain level?:</legend>
                                        0<input
                                        type="range"
                                        id="slider"
                                        name="PainLevel"
                                        min="0"
                                        max="10"
                                        value="0"
                                        oninput="updatePainLevel(this.value)">10
                                    <br>
                                        Your current pain level: <span id="painValue">0</span>
                                    </fieldset>
                                </td>
                                <script>
                                    function updatePainLevel(value)
                                    {
                                    document.getElementById('painValue').textContent=value;
                                    }
                                </script>
                            </tr>
                        
                        <!-- Remember Me Checkbox -->
                        <tr>
                            <td class="buttons" colspan="2">
                                <div class="remember-me">
                                <input type="checkbox" id="rememberMe" name="rememberMe" checked>
                                <label for="rememberMe">Remember Me</label>
                                </div>
                            </td>
                        </tr>

                          <!-- Reset and Submit Buttons -->
                            <tr>
                            <td class="buttons" colspan="2">
                                <input type="reset" value="Clear">
                                <input type="submit" onclick="validateAndSubmit()" value="Submit">
                                <input type="button" class="submit-button" value="Review" onclick="displayInput()">
                                <input type="button" value="Validate" id="validateForm" onclick="checkFormValidity()">
                            </td>
                            </tr>
             
                    </div>
                 </form>  
            </table>
           
        <div id="reviewArea"></div>
        </main>
                <hr>
    <footer>
        <div>
            <a href="https://www.uh.edu/">
                <img id="footer-logo" src="../../healthaid.jpg" alt="Footer Logo" />
            </a>
            <p>
                <a href="mailto:lamdang474@gmail.com">lamdang474@gmail.com</a>
            </p>
            <p>
                <a href="mailto:lamdang474@gmail.com" class="contact">Contact Us!</a>
            </p>
            <p>4750 Calhoun Rd, Houston, TX 77004</p>
            <!-- Embed iframe with Google Maps -->
            <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d6929.909104636781!2d-95.33990299999999!3d29.7210757!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x8640bfac6704896d%3A0xd3ac97f07af27f80!2sMelcher%20Hall!5e0!3m2!1sen!2sus!4v1746045437718!5m2!1sen!2sus" width="400" height="300" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>    </footer>

    <script src="homework4.js"></script>

                        <script>
                        // Function to set a cookie with an optional expiration date (in hours)
                        function setCookie(name, value, hours) {
                            var expires = "";
                            if (hours) {
                                var date = new Date();
                                date.setTime(date.getTime() + (hours * 60 * 60 * 1000)); 
                                expires = "; expires=" + date.toUTCString();
                            }
                            document.cookie = name + "=" + (value || "") + expires + "; path=/";
                            console.log(`Cookie set: ${name}=${value} (expires in ${hours} hours)`);
                        }

                        // Function to get a cookie by name
                        function getCookie(name) {
                            var nameEQ = name + "=";
                            var ca = document.cookie.split(';');
                            for (var i = 0; i < ca.length; i++) {
                                var c = ca[i];
                                while (c.charAt(0) == ' ') c = c.substring(1, c.length);
                                if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
                            }
                            return null;
                        }

                        // Function to delete a cookie by name
                        function deleteCookie(name) {
                            document.cookie = name + "=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/";
                            console.log(`Cookie deleted: ${name}`);
                        }

                        var inputs = [
                            {id: "userID", cookieName: "userID"},
                            {id: "firstName", cookieName: "firstName"},
                            {id: "middleInitial", cookieName: "middleInitial"},
                            {id: "lastName", cookieName: "lastName"},
                            {id: "dateOfBirth", cookieName: "dateOfBirth"},
                            {id: "address1", cookieName: "address1"},
                            {id: "address2", cookieName: "address2"},
                            {id: "city", cookieName: "city"},
                            {id: "zipCode", cookieName: "zipCode"},
                            {id: "email", cookieName: "email"},
                            {id: "phoneNumber", cookieName: "phoneNumber"}
                        ];

                        function isRememberMeChecked() {
                            return document.getElementById("rememberMe").checked;
                        }

                        // Load the stored values from cookies into the form inputs ONLY if "Remember Me" is checked
                        window.onload = function() {
                            console.log('Page loaded');

                            // Check if the "Remember Me" checkbox is checked
                            var firstName = getCookie("firstName");
                            if (firstName) {
                                // Show welcome message if firstName cookie exists
                                document.getElementById("welcomeMessage").innerText = "Welcome back, " + firstName + "!";
                                document.getElementById("resetLink").innerText = "Not " + firstName + "? Click here to start as a NEW USER.";
                                document.getElementById("resetLink").style.display = "block";  // Show the link

                                // Load all cookies into the form if "Remember Me" is checked
                                if (isRememberMeChecked()) {
                                    inputs.forEach(function(input) {
                                        var storedValue = getCookie(input.cookieName);
                                        if (storedValue) {
                                            document.getElementById(input.id).value = storedValue;
                                            console.log(`Loaded cookie: ${input.cookieName}=${storedValue}`);
                                        }
                                    });
                                }
                            } else {
                                // If no "firstName" cookie, show default message
                                document.getElementById("welcomeMessage").innerText = "Welcome New User!";
                                document.getElementById("resetLink").style.display = "none";  
                            }
                        };

                        // Save form data to cookies ONLY if "Remember Me" is checked
                        inputs.forEach(function(input) {
                            var inputElement = document.getElementById(input.id);

                            inputElement.addEventListener("input", function() {
                                if (isRememberMeChecked()) {
                                    setCookie(input.cookieName, inputElement.value, 48); 
                                } else {
                                    deleteCookie(input.cookieName); 
                                }
                            });
                        });

                        // Handle form submission (to save form data and greeting message)
                        document.getElementById("userForm").onsubmit = function(event) {
                            event.preventDefault(); // 
                            console.log('Form submitted');

                            var firstName = document.getElementById("firstName").value;

                            // Check if "Remember Me" is checked and save or delete cookies accordingly
                            if (isRememberMeChecked()) {
                                if (firstName) {
                                    setCookie("firstName", firstName, 48); 
                                }

                                // Store all other cookies with 48-hour expiration
                                inputs.forEach(function(input) {
                                    var value = document.getElementById(input.id).value;
                                    setCookie(input.cookieName, value, 48);
                                });

                                // Display personalized greeting
                                document.getElementById("welcomeMessage").innerText = "Welcome back, " + firstName + "!";
                                document.getElementById("resetLink").innerText = "Not " + firstName + "? Click here to start as a NEW USER.";
                            } else {
                                // If "Remember Me" is unchecked, clear all cookies related to the form fields
                                inputs.forEach(function(input) {
                                    deleteCookie(input.cookieName); 
                                });

                                // Display personalized greeting
                                document.getElementById("welcomeMessage").innerText = "Welcome New User!";
                                document.getElementById("resetLink").style.display = "none";  
                            }

                            // Redirect to the thank you page
                            window.location.href = "homework4-thankyou.html"; 
                        };

                        // Reset form and cookies when clicking "Not [first name]? Click here to start as a NEW USER."
                        document.getElementById("resetLink").addEventListener("click", function() {
                            console.log('Reset link clicked, clearing cookies and form');

                            
                            inputs.forEach(function(input) {
                                deleteCookie(input.cookieName); 
                            });

                            inputs.forEach(function(input) {
                                document.getElementById(input.id).value = ''; 
                            });

                            document.getElementById("welcomeMessage").innerText = "Welcome New User!";
                       
                            document.getElementById("resetLink").style.display = "none";

                            document.getElementById("rememberMe").checked = false;
                        });
                        </script>


</body>
 
